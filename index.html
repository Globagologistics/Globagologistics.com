<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Global-Go - Single File App</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .map-full { width:100%; height:72vh; border-radius: 0.5rem; overflow:hidden; }
    .floating-card { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 92%; max-width:420px; z-index: 40; }
    @media(min-width:1024px){ .floating-card { left: auto; right: 24px; transform: none; } }
    
    @keyframes slowFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes quickFadeInOut {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeInScale {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .hero-image {
      animation: slowFadeIn 3s ease-in-out forwards;
    }
    
    .hero-image.pulse {
      animation: quickFadeInOut 1s ease-in-out;
    }

    .animate-fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
      opacity: 0;
    }

    .animate-fade-in-scale {
      animation: fadeInScale 0.6s ease-out forwards;
      opacity: 0;
    }

    .animate-slide-in-left {
      animation: slideInLeft 0.7s ease-out forwards;
      opacity: 0;
    }

    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-400 { animation-delay: 0.4s; }
    .delay-500 { animation-delay: 0.5s; }
    .delay-600 { animation-delay: 0.6s; }
  </style>
</head>
<body class="bg-white">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ==== CONFIG ====
    const GOOGLE_MAPS_API_KEY = "YOUR_GOOGLE_MAPS_API_KEY"; // <-- replace with real key
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxdIMaY3HqfZ5kZd4-5fU0M_HJ2BOy4OWu-H-ediM6Q0Itjninpc4pMrnIamesa-4ln/exec';

    // ==== Loading Spinner ====
    function LoadingSpinner() {
      return (
        <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/30">
          <div className="bg-white rounded-lg p-8 flex flex-col items-center gap-4">
            <div className="w-12 h-12 border-4 border-gray-200 border-t-[#1A365D] rounded-full animate-spin"></div>
            <p className="text-gray-700 font-semibold">Loading...</p>
          </div>
        </div>
      );
    }

    // ==== Utils / Hook (useShipment) ====
    function useShipment(initial = {}) {
      const [shipment, setShipment] = useState({
        transportMode: 'truck',
         vehicleDetails: { number: '', driver: '' },
        isPaused: false,
        currentLocation: null,
        whatsappLink: '+1(336)459-6552',
        status: 'Pending',
        startTime: null,
        endTime: null,
        packageImages: [],
        progress: 0,
        routePath: [],
        startPoint: null,
        endPoint: null,
        checkpoints: [],
        routeScreenshot: null,
        trackingCode: null,
        ...initial
      });

      // parse Google Maps Directions URL for start and end coordinates
      function parseGoogleLink(url) {
        if (!url) return null;

        // Extract start and end points from directions URL
        // Format: https://www.google.com/maps/dir/28.7041,77.1025/28.6139,77.2090 or with place names
        const dirMatch = url.match(/maps\/dir\/([^/]+)\/([^/?]+)/);
        if (dirMatch) {
          const startStr = dirMatch[1];
          const endStr = dirMatch[2];

          const parseCoord = (str) => {
            const coordMatch = str.match(/(-?\d+\.\d+),(-?\d+\.\d+)/);
            if (coordMatch) {
              return { latitude: parseFloat(coordMatch[1]), longitude: parseFloat(coordMatch[2]) };
            }
            return null;
          };

          const start = parseCoord(startStr);
          const end = parseCoord(endStr);

          if (start && end) {
            return { start, end, startStr, endStr };
          }
        }

        // Fallback: try single coordinate extraction
        const atMatch = url.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);
        if (atMatch) return { latitude: parseFloat(atMatch[1]), longitude: parseFloat(atMatch[2]) };
        const qMatch = url.match(/[?&]q=(-?\d+\.\d+),(-?\d+\.\d+)/);
        if (qMatch) return { latitude: parseFloat(qMatch[1]), longitude: parseFloat(qMatch[2]) };
        return null;
      }
      
      // Fetch route path from Google Directions Service
      function fetchRoutePath(start, end) {
        loadGoogleMaps(GOOGLE_MAPS_API_KEY).then((maps) => {
          const service = new maps.DirectionsService();
          service.route(
            {
              origin: { lat: start.latitude, lng: start.longitude },
              destination: { lat: end.latitude, lng: end.longitude },
              travelMode: maps.TravelMode.DRIVING,
            },
            (result, status) => {
              if (status === maps.DirectionsStatus.OK && result.routes && result.routes[0]) {
                const points = result.routes[0].overview_path.map(p => ({
                  latitude: p.lat(),
                  longitude: p.lng(),
                }));
                setShipment(prev => ({ ...prev, routePath: points }));
              }
            }
          );
        }).catch(() => {});
      }

      function calculateVehicleProgress(startTime, endTime, now = Date.now()) {
        if (!startTime || !endTime) return 0;
        const s = new Date(startTime).getTime();
        const e = new Date(endTime).getTime();
        const c = new Date(now).getTime();
        if (c <= s) return 0;
        if (c >= e) return 100;
        return Math.round(((c - s) / (e - s)) * 100);
      }
      
      function calculateMarkerPositionOnRoute(progress, routePath) {
        if (!routePath || routePath.length === 0) return null;
        const progressDecimal = Math.max(0, Math.min(100, progress)) / 100;
        const index = Math.floor(progressDecimal * (routePath.length - 1));
        return routePath[index];
      }

      // internal timer to update progress when Active and not paused
      useEffect(() => {
        let t;
        function tick() {
          if (shipment.status === 'Active' && !shipment.isPaused && shipment.startTime && shipment.endTime) {
            const progress = calculateVehicleProgress(shipment.startTime, shipment.endTime);
            const newLocation = shipment.routePath && shipment.routePath.length > 0 
              ? calculateMarkerPositionOnRoute(progress, shipment.routePath)
              : shipment.currentLocation;
            setShipment(prev => ({ ...prev, progress, currentLocation: newLocation || prev.currentLocation }));
          }
        }
        if (shipment.status === 'Active' && !shipment.isPaused) {
          tick();
          t = setInterval(tick, 1000);
        }
        return () => clearInterval(t);
      }, [shipment.status, shipment.isPaused, shipment.startTime, shipment.endTime, shipment.routePath]);

      function updateShipment(patch) {
        setShipment(prev => {
          const updated = { ...prev, ...patch };
          // Fetch route if start and end points are provided
          if (patch.startPoint && patch.endPoint) {
            setTimeout(() => fetchRoutePath(patch.startPoint, patch.endPoint), 100);
          }
          return updated;
        });
      }

      return { shipment, setShipment, updateShipment, parseGoogleLink, calculateVehicleProgress, calculateMarkerPositionOnRoute, fetchRoutePath };
    }

    // ==== Google Maps Loader ====
    function loadGoogleMaps(apiKey) {
      return new Promise((resolve, reject) => {
        if (!apiKey) { reject(new Error('Missing API key')); return; }
        if (window.google && window.google.maps) return resolve(window.google.maps);
        const id = 'gmap-api';
        if (document.getElementById(id)) {
          const interval = setInterval(() => { if (window.google && window.google.maps) { clearInterval(interval); resolve(window.google.maps); } }, 200);
          return;
        }
        const script = document.createElement('script');
        script.id = id;
        script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places`;
        script.async = true;
        script.onload = () => resolve(window.google.maps);
        script.onerror = (e) => reject(e);
        document.head.appendChild(script);
      });
    }

    // ==== Mock Reviews Data ====
    const REVIEWS = [
      { id: 1, fullName: 'Emma Johnson', location: 'New York, USA', rating: 5, comment: 'Fast and reliable service, highly recommended.' },
      { id: 2, fullName: 'Liam Smith', location: 'Los Angeles, USA', rating: 4, comment: 'Great communication and on-time delivery.' },
      { id: 3, fullName: 'Olivia Brown', location: 'Chicago, USA', rating: 5, comment: 'Professional team and excellent tracking.' },
      { id: 4, fullName: 'Noah Davis', location: 'Houston, USA', rating: 5, comment: 'Seamless experience from pickup to delivery.' },
      { id: 5, fullName: 'Ava Miller', location: 'Miami, USA', rating: 4, comment: 'Good rates and fast transit.' },
      { id: 6, fullName: 'Lucas Martin', location: 'Paris, France', rating: 5, comment: "Livraison trÃ¨s rapide et service impeccable !" },
      { id: 7, fullName: 'ChloÃ© Dubois', location: 'Lyon, France', rating: 5, comment: "Service exceptionnel, merci beaucoup !" },
      { id: 8, fullName: 'Hao Wang', location: 'Shanghai, China', rating: 5, comment: 'é€Ÿåº¦éžå¸¸å¿«ï¼ŒåŒ…è£…å®Œå¥½ã€‚'},
      { id: 9, fullName: 'Li Na', location: 'Beijing, China', rating: 4, comment: 'è·Ÿè¸ªç³»ç»Ÿå¾ˆå¥½ï¼Œç”¨èµ·æ¥æ–¹ä¾¿ã€‚'},
      { id: 10, fullName: 'Carlos GarcÃ­a', location: 'Madrid, Spain', rating: 5, comment: 'Â¡Entrega puntual y atenciÃ³n al cliente excelente!'},
      { id: 11, fullName: 'MarÃ­a FernÃ¡ndez', location: 'Barcelona, Spain', rating: 4, comment: 'Muy buena experiencia, lo recomiendo.'},
      { id: 12, fullName: 'Lucas Silva', location: 'SÃ£o Paulo, Brazil', rating: 5, comment: 'Entrega rÃ¡pida e excelente suporte.'},
      { id: 13, fullName: 'Sofia Oliveira', location: 'Rio de Janeiro, Brazil', rating: 4, comment: 'ServiÃ§o confiÃ¡vel e eficiente.'},
      { id: 14, fullName: 'Max MÃ¼ller', location: 'Berlin, Germany', rating: 5, comment: 'ZuverlÃ¤ssig und professionell.'},
      { id: 15, fullName: 'Lena Schmidt', location: 'Munich, Germany', rating: 4, comment: 'Schnelle Lieferung und guter Service.'},
      { id: 16, fullName: 'Giulia Rossi', location: 'Rome, Italy', rating: 5, comment: 'Servizio eccellente e puntuale.'},
      { id: 17, fullName: 'Miguel Ãngel', location: 'Mexico City, Mexico', rating: 4, comment: 'Entrega rÃ¡pida y buen soporte.'},
      { id: 18, fullName: 'Yuki Tanaka', location: 'Tokyo, Japan', rating: 5, comment: 'è¿…é€Ÿã§ä¿¡é ¼ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚'},
      { id: 19, fullName: 'Sven Andersen', location: 'Copenhagen, Denmark', rating: 4, comment: 'Reliable and friendly team.'},
      { id: 20, fullName: 'Anna Kowalska', location: 'Warsaw, Poland', rating: 5, comment: 'Åšwietna obsÅ‚uga i szybka dostawa.'},
    ];

    // ==== useScrollReveal Hook ====
    function useScrollReveal(options = { threshold: 0.12 }) {
      const ref = useRef(null);
      const [visible, setVisible] = useState(false);

      useEffect(() => {
        const node = ref.current;
        if (!node) return;
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              setVisible(true);
              observer.unobserve(entry.target);
            }
          });
        }, options);
        observer.observe(node);
        return () => observer.disconnect();
      }, [ref.current]);

      return [ref, visible];
    }

    // ==== Checkpoint Math Utility ====
    function calculateCurrentCheckpoint(startTime, endTime, checkpointsList) {
      if (!startTime || !endTime || !checkpointsList || checkpointsList.length === 0) {
        return { checkpoint: 'Location unknown', progress: 0, index: 0 };
      }

      const now = Date.now();
      const start = new Date(startTime).getTime();
      const end = new Date(endTime).getTime();
      
      // Calculate progress percentage
      const progressPercent = Math.min(100, Math.max(0, ((now - start) / (end - start)) * 100));
      
      // Calculate which checkpoint we're at
      const checkpointIndex = Math.floor((progressPercent / 100) * checkpointsList.length);
      const currentIndex = Math.min(checkpointsList.length - 1, Math.max(0, checkpointIndex));
      
      return {
        checkpoint: checkpointsList[currentIndex] || 'Location unknown',
        progress: Math.round(progressPercent),
        index: currentIndex
      };
    }

    // ==== Map Component ====
    function MapLive({ center, markerPosition, routePath }) {
      const mapRef = useRef(null);
      const containerRef = useRef(null);
      const markerRef = useRef(null);
      const polylineRef = useRef(null);
      const mapsRef = useRef(null);

      useEffect(() => {
        let mounted = true;
        loadGoogleMaps(GOOGLE_MAPS_API_KEY).then((maps) => {
          if (!mounted) return;
          mapsRef.current = maps;
          mapRef.current = new maps.Map(containerRef.current, {
            center: center || { lat: 28.7041, lng: 77.1025 },
            zoom: 12,
            disableDefaultUI: false,
          });
          markerRef.current = new maps.Marker({ map: mapRef.current, position: center || { lat: 28.7041, lng: 77.1025 } });
        }).catch(() => {});
        return () => { mounted = false; };
      }, []);

      useEffect(() => {
        if (mapRef.current && routePath && routePath.length > 0 && mapsRef.current) {
          const path = routePath.map(p => ({ lat: p.latitude, lng: p.longitude }));
          if (polylineRef.current) polylineRef.current.setMap(null);
          polylineRef.current = new mapsRef.current.Polyline({
            path: path,
            geodesic: true,
            strokeColor: '#2563eb',
            strokeOpacity: 0.8,
            strokeWeight: 4,
            map: mapRef.current,
          });
          if (path.length > 0) {
            const bounds = new mapsRef.current.LatLngBounds();
            path.forEach(p => bounds.extend(p));
            mapRef.current.fitBounds(bounds);
          }
        }
      }, [routePath]);

      useEffect(() => {
        if (mapRef.current && markerRef.current && markerPosition) {
          const pos = { lat: markerPosition.latitude, lng: markerPosition.longitude };
          markerRef.current.setPosition(pos);
          mapRef.current.panTo(pos);
          mapRef.current.setZoom(13);
        }
      }, [markerPosition]);

      return <div ref={containerRef} className="map-full bg-gray-200" />;
    }

    // ==== Home Page ====
    function Home({ onNavigate }) {
      const imgs = ['hero1.png'];
      const [idx, setIdx] = useState(0);
      const [isPulsing, setIsPulsing] = useState(false);
      
      useEffect(() => { 
        const t = setInterval(()=> setIdx(i=> (i+1)%imgs.length),5000); 
        return ()=>clearInterval(t); 
      },[]);
      
      useEffect(() => {
        const pulseTimer = setInterval(() => {
          setIsPulsing(true);
          setTimeout(() => setIsPulsing(false), 1000);
        }, 60000);
        return () => clearInterval(pulseTimer);
      }, []);
      
      const [tracking, setTracking] = useState('');
      return (
        <div className="min-h-screen">
          <section className="relative h-screen overflow-hidden">
            <div className="absolute inset-0">
              <img src={imgs[idx]} alt="hero" className={`w-full h-full object-cover hero-image ${isPulsing ? 'pulse' : ''}`} onError={(e)=>e.currentTarget.classList.add('hidden')} />
            </div>
            <div className="absolute inset-0 bg-black/40" />
            <div className="relative z-10 h-full flex flex-col items-center justify-center px-4 text-center">
              <div className="mb-8 animate-fade-in-scale delay-100">
                <div className="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4">
                  <img src="logo1.jpeg" alt="Global-Go" className="w-full h-full object-contain rounded-full" />
                </div>
                <h1 className="text-white text-5xl font-bold animate-fade-in-up delay-200">Global-Go</h1>
                <p className="text-blue-100 mt-2 animate-fade-in-up delay-300">Global Logistics Made Simple</p>
              </div>

              <form onSubmit={(e)=>{ e.preventDefault(); if(tracking.trim()) onNavigate('track', tracking.trim()); }} className="w-full max-w-md animate-fade-in-up delay-400">
                <div className="flex items-center bg-white rounded-full p-2 shadow-lg">
                  <input value={tracking} onChange={e=>setTracking(e.target.value)} className="flex-1 px-4 py-3 rounded-full outline-none transition-all duration-300 focus:shadow-xl" placeholder="Enter Tracking ID (e.g. GG-2026-001)" />
                  <button type="submit" disabled={!tracking.trim()} className="bg-blue-600 text-white px-6 py-3 rounded-full ml-3 transition-all duration-300 hover:bg-blue-700 disabled:opacity-50">Track</button>
                </div>
              </form>

              <div className="mt-6 flex gap-3 justify-center flex-wrap">
                <button onClick={() => onNavigate('signin')} className="px-6 py-2 bg-white text-[#1A365D] rounded-lg font-semibold hover:bg-gray-100 transition-all duration-300 animate-fade-in-up delay-500">
                  Sign In
                </button>
                <button onClick={() => onNavigate('signup')} className="px-6 py-2 border-2 border-white text-white rounded-lg font-semibold hover:bg-white hover:text-[#1A365D] transition-all duration-300 animate-fade-in-up delay-600">
                  Sign Up
                </button>
                <button onClick={() => onNavigate('signup')} className="px-6 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-all duration-300 animate-fade-in-up delay-600" title="Create an account to send items">
                  ðŸ“¦ Send Item
                </button>
              </div>
            </div>
          </section>

          {/* Services Grid Section */}
          <section className="py-16 bg-gray-50">
            <div className="max-w-7xl mx-auto px-4">
              <h2 className="text-4xl font-bold text-center text-[#1A365D] mb-12 animate-fade-in-up">Our Global Logistics Solutions</h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                <ServiceCard icon="fa-plane" title="Air Freight" description="Fast, reliable air cargo services connecting your goods to 103+ countries." delay="delay-100" />
                <ServiceCard icon="fa-ship" title="Ocean Cargo" description="Navigate global seas with our secure and cost-effective ocean shipping." delay="delay-300" />
                <ServiceCard icon="fa-truck" title="Land Transport" description="Cover every mile with our extensive fleet of 6.5k+ vehicles." delay="delay-500" />
              </div>
            </div>
          </section>

          {/* Statistics Bar */}
          <section className="bg-[#1A365D] text-white py-12">
            <div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
              <div className="animate-fade-in-up delay-100">
                <p className="text-4xl font-bold text-sky-400">105+</p>
                <p className="text-lg mt-2">Countries Served</p>
              </div>
              <div className="animate-fade-in-up delay-300">
                <p className="text-4xl font-bold text-sky-400">100M+</p>
                <p className="text-lg mt-2">Packages Delivered</p>
              </div>
              <div className="animate-fade-in-up delay-500">
                <p className="text-4xl font-bold text-sky-400">6.5k+</p>
                <p className="text-lg mt-2">Fleet Vehicles</p>
              </div>
            </div>
          </section>

          {/* Why Choose Us Section */}
          <section className="py-16 bg-white">
            <div className="max-w-7xl mx-auto px-4">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div className="animate-slide-in-left delay-100">
                  <img src="hero2.jfif" alt="Logistics Hub" className="w-full h-screen object-cover rounded-lg shadow-lg md:h-96" />
                </div>
                <div className="space-y-6 animate-fade-in-up delay-300">
                  <h2 className="text-3xl font-bold text-[#1A365D]">Why Choose Global-Go?</h2>
                  <div className="flex items-start gap-4">
                    <i className="fas fa-clock text-sky-500 text-2xl mt-1"></i>
                    <div>
                      <h3 className="text-xl font-semibold text-[#1A365D]">24/7 Live Tracking</h3>
                      <p className="text-gray-600">Monitor your shipments in real-time, every second of every day.</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-4">
                    <i className="fas fa-lock text-sky-500 text-2xl mt-1"></i>
                    <div>
                      <h3 className="text-xl font-semibold text-[#1A365D]">Global Security</h3>
                      <p className="text-gray-600">Your packages are secure across all our operations in Spain, China, and France.</p>
                    </div>
                  </div>
                  <div className="flex items-start gap-4">
                    <i className="fas fa-headset text-sky-500 text-2xl mt-1"></i>
                    <div>
                      <h3 className="text-xl font-semibold text-[#1A365D]">Localized Support</h3>
                      <p className="text-gray-600">Dedicated support teams in every major region, speaking your language.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          {/* Client Reviews Section */}
          <ReviewsSection />

        </div>
      );
    }

    function ServiceCard({ icon, title, description, delay }) {
      const [isVisible, setIsVisible] = useState(false);
      const ref = useRef(null);

      useEffect(() => {
        const observer = new IntersectionObserver(([entry]) => {
          if (entry.isIntersecting) {
            setIsVisible(true);
            observer.unobserve(entry.target);
          }
        }, { threshold: 0.1 });
        if (ref.current) observer.observe(ref.current);
        return () => observer.disconnect();
      }, []);

      return (
        <div ref={ref} className={`bg-white p-8 rounded-lg border-2 border-gray-200 hover:border-sky-500 shadow transition-all duration-300 hover:shadow-lg ${isVisible ? `animate-fade-in-up ${delay}` : 'opacity-0'}`}>
          <i className={`fas ${icon} text-4xl text-[#1A365D] mb-4`}></i>
          <h3 className="text-xl font-bold text-[#1A365D] mb-2">{title}</h3>
          <p className="text-gray-600">{description}</p>
        </div>
      );
    }

    // ==== Reviews Section ====
    function ReviewsSection() {
      const [selected, setSelected] = useState([]);
      const [ref, visible] = useScrollReveal({ threshold: 0.12 });

      function pickThree() {
        const arr = [...REVIEWS];
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr.slice(0, 3);
      }

      useEffect(() => {
        setSelected(pickThree());
        const iv = setInterval(() => setSelected(pickThree()), 5000);
        return () => clearInterval(iv);
      }, []);

      return (
        <section ref={ref} className={`py-12 max-w-7xl mx-auto px-4 ${visible ? 'animate-fade-in-up' : 'opacity-0'}`}>
          <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-8">What Our Global Clients Say</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {selected.map((r,i) => (
              <div key={r.id} className={`${visible ? `animate-fade-in-scale delay-${(i+1)*100}` : 'opacity-0'} bg-white p-6 rounded-lg shadow-md` }>
                <div className="flex items-start gap-3">
                  <div className="text-3xl text-sky-500">â€œ</div>
                  <div>
                    <div className="flex items-center justify-between gap-3">
                      <div>
                        <div className="font-bold text-[#1A365D]">{r.fullName}</div>
                        <div className="text-sm text-gray-500">{r.location}</div>
                      </div>
                      <div className="text-yellow-400">{Array.from({length: r.rating}).map((_,idx)=>(<i key={idx} className="fas fa-star"></i>))}</div>
                    </div>
                    <p className="mt-3 text-gray-700">{r.comment}</p>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>
      );
    }

    // ==== About Page ====
    function About() {
      const [refStory, visibleStory] = useScrollReveal({ threshold: 0.1 });
      const [refStats, visibleStats] = useScrollReveal({ threshold: 0.1 });
      const [refServices, visibleServices] = useScrollReveal({ threshold: 0.1 });
      const [refOffices, visibleOffices] = useScrollReveal({ threshold: 0.1 });

      return (
        <div className="min-h-screen bg-white">
          {/* Hero Section */}
          <section className="bg-gradient-to-r from-[#1A365D] to-[#0f2847] text-white py-16">
            <div className="max-w-7xl mx-auto px-4 text-center">
              <h1 className="text-5xl font-bold mb-4 animate-fade-in-up">Redefining Global Logistics Since 1998</h1>
              <p className="text-xl text-blue-100">Connecting the world, one package at a time.</p>
            </div>
          </section>

          {/* Story Section */}
          <section ref={refStory} className={`py-16 bg-gray-50 ${visibleStory ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-7xl mx-auto px-4">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h2 className="text-3xl font-bold text-[#1A365D] mb-4">Our Story</h2>
                  <p className="text-gray-700 leading-relaxed mb-4">
                    Founded in 1998, Global-Go began with a single vision: to bridge the gap between continents and cultures through seamless logistics. What started as a small courier service in the heart of the United States has evolved into a world-renowned logistics powerhouse.
                  </p>
                  <p className="text-gray-700 leading-relaxed">
                    For over two decades, we have remained at the forefront of the industry, pioneering the "Checkpoint-First" tracking technology that gives our clients peace of mind in a fast-moving world.
                  </p>
                </div>
                <div className="bg-white p-8 border-l-4 border-sky-500 shadow-lg">
                  <p className="text-sm font-semibold text-sky-500 uppercase mb-3">CEO Message</p>
                  <blockquote className="text-gray-800 italic mb-4">
                    "At Global-Go, we don't just move boxes; we move the world. We understand that every package represents a promiseâ€”a gift for a loved one, a vital component for a business, or a life-saving supply. Since 1998, our mission has been to treat every delivery with the same precision and care as if it were our own. We are proud to be the pulse of global commerce."
                  </blockquote>
                  <p className="font-bold text-[#1A365D]">â€” Robert J. Sterling, CEO & Founder</p>
                </div>
              </div>
            </div>
          </section>

          {/* Statistics Section */}
          <section ref={refStats} className={`py-16 bg-white ${visibleStats ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-7xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Global-Go by the Numbers</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
                <div className={`text-center p-6 bg-gray-50 rounded-lg ${visibleStats ? 'animate-fade-in-scale delay-100' : 'opacity-0'}`}>
                  <i className="fas fa-globe text-4xl text-sky-500 mb-3"></i>
                  <p className="text-3xl font-bold text-[#1A365D]">103</p>
                  <p className="text-gray-600 mt-2">Countries Served</p>
                </div>
                <div className={`text-center p-6 bg-gray-50 rounded-lg ${visibleStats ? 'animate-fade-in-scale delay-200' : 'opacity-0'}`}>
                  <i className="fas fa-warehouse text-4xl text-sky-500 mb-3"></i>
                  <p className="text-3xl font-bold text-[#1A365D]">1.7K</p>
                  <p className="text-gray-600 mt-2">Warehouses</p>
                </div>
                <div className={`text-center p-6 bg-gray-50 rounded-lg ${visibleStats ? 'animate-fade-in-scale delay-300' : 'opacity-0'}`}>
                  <i className="fas fa-truck text-4xl text-sky-500 mb-3"></i>
                  <p className="text-3xl font-bold text-[#1A365D]">6.5K</p>
                  <p className="text-gray-600 mt-2">Fleet Vehicles</p>
                </div>
                <div className={`text-center p-6 bg-gray-50 rounded-lg ${visibleStats ? 'animate-fade-in-scale delay-400' : 'opacity-0'}`}>
                  <i className="fas fa-box text-4xl text-sky-500 mb-3"></i>
                  <p className="text-3xl font-bold text-[#1A365D]">100M+</p>
                  <p className="text-gray-600 mt-2">Packages Delivered</p>
                </div>
                <div className={`text-center p-6 bg-gray-50 rounded-lg ${visibleStats ? 'animate-fade-in-scale delay-500' : 'opacity-0'}`}>
                  <i className="fas fa-people-group text-4xl text-sky-500 mb-3"></i>
                  <p className="text-3xl font-bold text-[#1A365D]">10K+</p>
                  <p className="text-gray-600 mt-2">Employees</p>
                </div>
              </div>
            </div>
          </section>

          {/* Services Section */}
          <section ref={refServices} className={`py-16 bg-gray-50 ${visibleServices ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-7xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Our Services</h2>
              <p className="text-center text-gray-700 max-w-2xl mx-auto mb-12">We provide a full spectrum of logistics solutions designed for speed, safety, and affordability. No matter the size of the job, Global-Go delivers.</p>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div className={`bg-white p-6 rounded-lg shadow ${visibleServices ? 'animate-fade-in-up delay-100' : 'opacity-0'}`}>
                  <i className="fas fa-door-open text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">Door-to-Door Service</h3>
                  <p className="text-gray-700">Our local couriers handle the "last mile" with professional care, picking up from your doorstep and delivering directly to the receiver.</p>
                </div>
                <div className={`bg-white p-6 rounded-lg shadow ${visibleServices ? 'animate-fade-in-up delay-200' : 'opacity-0'}`}>
                  <i className="fas fa-box text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">Global Cargo & Freight</h3>
                  <p className="text-gray-700">Whether by air, sea, or land, our heavy-duty cargo services move bulk shipments and industrial equipment across borders with ease.</p>
                </div>
                <div className={`bg-white p-6 rounded-lg shadow ${visibleServices ? 'animate-fade-in-up delay-300' : 'opacity-0'}`}>
                  <i className="fas fa-weight-hanging text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">Any Size Package</h3>
                  <p className="text-gray-700">From a single document to multi-ton industrial machinery, we have the specialized equipment to handle shipments of any size.</p>
                </div>
                <div className={`bg-white p-6 rounded-lg shadow ${visibleServices ? 'animate-fade-in-up delay-400' : 'opacity-0'}`}>
                  <i className="fas fa-tag text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">Affordable Pricing</h3>
                  <p className="text-gray-700">We believe world-class logistics shouldn't break the bank. We offer competitive rates without compromising speed or security.</p>
                </div>
              </div>
            </div>
          </section>

          {/* Global Offices Section */}
          <section ref={refOffices} className={`py-16 bg-white ${visibleOffices ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-7xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Our Global Head Offices</h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div className={`bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg border border-sky-200 ${visibleOffices ? 'animate-fade-in-scale delay-100' : 'opacity-0'}`}>
                  <i className="fas fa-map-marker-alt text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-4">Global HQ - USA</h3>
                  <p className="text-gray-700 mb-3">1402 Commerce Way<br/>Houston, TX 77002<br/>United States</p>
                  <p className="text-sky-600 font-semibold">ðŸ“ž +1 (800) 455-GLOBAL</p>
                </div>
                <div className={`bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg border border-sky-200 ${visibleOffices ? 'animate-fade-in-scale delay-200' : 'opacity-0'}`}>
                  <i className="fas fa-map-marker-alt text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-4">Europe Regional - France</h3>
                  <p className="text-gray-700 mb-3">28 Rue de la Logistique<br/>75008 Paris<br/>France</p>
                  <p className="text-sky-600 font-semibold">ðŸ“ž +33 (1) 42-96-00-00</p>
                </div>
                <div className={`bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg border border-sky-200 ${visibleOffices ? 'animate-fade-in-scale delay-300' : 'opacity-0'}`}>
                  <i className="fas fa-map-marker-alt text-3xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-4">Asia-Pacific Hub - Australia</h3>
                  <p className="text-gray-700 mb-3">89 Harbour Street<br/>Sydney NSW 2000<br/>Australia</p>
                  <p className="text-sky-600 font-semibold">ðŸ“ž +61 (2) 9230-1111</p>
                </div>
              </div>
            </div>
          </section>

          {/* Support Section */}
          <section className="py-8 bg-[#1A365D] text-white text-center">
            <div className="max-w-7xl mx-auto px-4">
              <h3 className="text-2xl font-bold mb-4">24/7 Customer Care Support</h3>
              <p className="text-blue-100">Available around the clock to assist with your inquiries.</p>
            </div>
          </section>
        </div>
      );
    }

    // ==== Help & Enquiry Page ====
    function Help({ setLoading }) {
      const [formData, setFormData] = useState({ name: '', email: '', trackingId: '', subject: 'Shipping Quote', message: '' });
      const [showSuccess, setShowSuccess] = useState(false);
      const [expandedFAQ, setExpandedFAQ] = useState(null);
      const [refForm, visibleForm] = useScrollReveal({ threshold: 0.1 });
      const [refFAQ, visibleFAQ] = useScrollReveal({ threshold: 0.1 });
      const [refContact, visibleContact] = useScrollReveal({ threshold: 0.1 });
      const [refOffices, visibleOffices] = useScrollReveal({ threshold: 0.1 });

      const faqs = [
        { q: 'How long does international shipping take?', a: 'International shipping typically takes 7-14 business days depending on destination and service type. Express options available for urgent shipments.' },
        { q: 'Is my package insured?', a: 'Yes! All packages are automatically insured up to $500 USD. Premium insurance available for higher-value items.' },
        { q: 'Can I track my package in real-time?', a: 'Absolutely. Our Checkpoint-First tracking technology gives you live updates every step of the journey, with updates every 2-4 hours.' },
        { q: 'What payment methods do you accept?', a: 'We accept all major credit cards, bank transfers, and digital wallets. Corporate accounts available with net-30 or net-60 terms.' },
        { q: 'How do I schedule a pickup?', a: 'Simply log into your account or call our customer care line. Pickups are available 24/7 in most areas, with same-day service in major cities.' }
      ];

      function handleSubmit() {
        if (!formData.name || !formData.email || !formData.message) {
          alert('Please fill in all required fields');
          return;
        }
        setLoading(true);
        
        // Send to Google Script
        const googleFormData = new FormData();
        googleFormData.append('type', 'enquiry');
        googleFormData.append('name', formData.name);
        googleFormData.append('email', formData.email);
        googleFormData.append('trackingId', formData.trackingId);
        googleFormData.append('subject', formData.subject);
        googleFormData.append('message', formData.message);
        
        Promise.all([
          fetch(GOOGLE_SCRIPT_URL, { method: 'POST', body: googleFormData }),
          fetch('https://formspree.io/f/meeljabd', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              name: formData.name,
              email: formData.email,
              trackingId: formData.trackingId,
              subject: formData.subject,
              message: formData.message
            })
          })
        ])
        .then(responses => {
          setLoading(false);
          setShowSuccess(true);
          setFormData({ name: '', email: '', trackingId: '', subject: 'Shipping Quote', message: '' });
          setTimeout(() => setShowSuccess(false), 6000);
        })
        .catch(error => {
          setLoading(false);
          alert('Error submitting form: ' + error.message);
        });
      }

      return (
        <div className="min-h-screen bg-white">
          {/* Hero Section */}
          <section className="bg-gradient-to-r from-[#1A365D] to-[#0f2847] text-white py-12">
            <div className="max-w-7xl mx-auto px-4 text-center">
              <h1 className="text-5xl font-bold mb-4 animate-fade-in-up">Help & Support Centre</h1>
              <p className="text-xl text-blue-100">We're here to help. Contact us anytime, anywhere.</p>
            </div>
          </section>

          {/* Enquiry Form Section */}
          <section ref={refForm} className={`py-16 bg-gray-50 ${visibleForm ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-4xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Submit an Enquiry</h2>
              <div className="bg-white rounded-lg shadow-lg p-8">
                {showSuccess && (
                  <div className="mb-6 p-4 bg-green-100 border border-green-400 rounded-lg">
                    <p className="text-green-800 font-semibold">âœ“ Thank you! A Global-Go representative will contact you within 24 hours.</p>
                  </div>
                )}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Full Name *</label>
                    <input 
                      type="text" 
                      value={formData.name} 
                      onChange={e => setFormData({...formData, name: e.target.value})}
                      placeholder="John Doe"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                    <input 
                      type="email" 
                      value={formData.email} 
                      onChange={e => setFormData({...formData, email: e.target.value})}
                      placeholder="you@example.com"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                    />
                  </div>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Tracking ID (optional)</label>
                    <input 
                      type="text" 
                      value={formData.trackingId} 
                      onChange={e => setFormData({...formData, trackingId: e.target.value})}
                      placeholder="GG-2026-001"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Subject *</label>
                    <select 
                      value={formData.subject} 
                      onChange={e => setFormData({...formData, subject: e.target.value})}
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                    >
                      <option>Shipping Quote</option>
                      <option>Delayed Package</option>
                      <option>Billing</option>
                      <option>Other</option>
                    </select>
                  </div>
                </div>
                <div className="mb-6">
                  <label className="block text-sm font-medium text-gray-700 mb-2">Message *</label>
                  <textarea 
                    value={formData.message} 
                    onChange={e => setFormData({...formData, message: e.target.value})}
                    placeholder="Tell us how we can help..."
                    rows="5"
                    className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                  />
                </div>
                <button 
                  onClick={handleSubmit}
                  disabled={loading}
                  className={`w-full py-3 rounded-lg font-semibold transition-all duration-300 ${loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-[#1A365D] hover:bg-[#0f2847] text-white'}`}
                >
                  {loading ? 'Submitting...' : 'Submit Enquiry'}
                </button>
              </div>
            </div>
          </section>

          {/* FAQ Section */}
          <section ref={refFAQ} className={`py-16 bg-white ${visibleFAQ ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-4xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Frequently Asked Questions</h2>
              <div className="space-y-4">
                {faqs.map((faq, i) => (
                  <div key={i} className="border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition">
                    <button 
                      onClick={() => setExpandedFAQ(expandedFAQ === i ? null : i)}
                      className="w-full px-6 py-4 bg-gray-50 hover:bg-gray-100 flex items-center justify-between transition"
                    >
                      <span className="font-semibold text-[#1A365D] text-left">{faq.q}</span>
                      <i className={`fas fa-chevron-down text-sky-500 transition-transform ${expandedFAQ === i ? 'rotate-180' : ''}`}></i>
                    </button>
                    {expandedFAQ === i && (
                      <div className="px-6 py-4 bg-white border-t border-gray-200">
                        <p className="text-gray-700">{faq.a}</p>
                      </div>
                    )}
                  </div>
                ))}
              </div>
            </div>
          </section>

          {/* Contact Info Section */}
          <section ref={refContact} className={`py-16 bg-gray-50 ${visibleContact ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-7xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Direct Contact Information</h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                <div className="bg-white p-8 rounded-lg shadow text-center">
                  <i className="fas fa-phone text-4xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">USA Support</h3>
                  <a href="tel:+18004556425" className="text-lg font-semibold text-sky-600 hover:text-sky-700">+1 (800) 455-GLOBAL</a>
                  <p className="text-sm text-gray-600 mt-2">Available 24/7</p>
                </div>
                <div className="bg-white p-8 rounded-lg shadow text-center">
                  <i className="fas fa-phone text-4xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">Europe Support</h3>
                  <a href="tel:+33142960000" className="text-lg font-semibold text-sky-600 hover:text-sky-700">+33 (1) 42-96-00-00</a>
                  <p className="text-sm text-gray-600 mt-2">Available 24/7</p>
                </div>
                <div className="bg-white p-8 rounded-lg shadow text-center">
                  <i className="fas fa-phone text-4xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-2">Australia/Asia Support</h3>
                  <a href="tel:+61292301111" className="text-lg font-semibold text-sky-600 hover:text-sky-700">+61 (2) 9230-1111</a>
                  <p className="text-sm text-gray-600 mt-2">Available 24/7</p>
                </div>
              </div>

              <div className="bg-white p-8 rounded-lg shadow text-center">
                <h3 className="text-xl font-bold text-[#1A365D] mb-4">Prefer Email?</h3>
                <a href="mailto:Globalgologistics@gmail.com" className="text-lg font-semibold text-sky-600 hover:text-sky-700">
                  ðŸ“§ Globalgologistics@gmail.com
                </a>
                <p className="text-sm text-gray-600 mt-3">Response within 24 hours</p>
              </div>
            </div>
          </section>

          {/* Global Offices Section */}
          <section ref={refOffices} className={`py-16 bg-white ${visibleOffices ? 'animate-fade-in-up' : 'opacity-0'}`}>
            <div className="max-w-7xl mx-auto px-4">
              <h2 className="text-3xl font-bold text-center text-[#1A365D] mb-12">Visit Our Global Head Offices</h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div className="bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg border border-sky-200 shadow-lg">
                  <i className="fas fa-map-marker-alt text-4xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-4">ðŸ‡ºðŸ‡¸ Global HQ - USA</h3>
                  <address className="text-gray-700 not-italic leading-relaxed mb-4">
                    1402 Commerce Way<br/>
                    Houston, TX 77002<br/>
                    United States
                  </address>
                  <a href="tel:+18004556425" className="text-sky-600 font-semibold hover:text-sky-700">+1 (800) 455-GLOBAL</a>
                </div>
                <div className="bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg border border-sky-200 shadow-lg">
                  <i className="fas fa-map-marker-alt text-4xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-4">ðŸ‡«ðŸ‡· Europe Regional - France</h3>
                  <address className="text-gray-700 not-italic leading-relaxed mb-4">
                    28 Rue de la Logistique<br/>
                    75008 Paris<br/>
                    France
                  </address>
                  <a href="tel:+33142960000" className="text-sky-600 font-semibold hover:text-sky-700">+33 (1) 42-96-00-00</a>
                </div>
                <div className="bg-gradient-to-br from-blue-50 to-white p-8 rounded-lg border border-sky-200 shadow-lg">
                  <i className="fas fa-map-marker-alt text-4xl text-sky-500 mb-4"></i>
                  <h3 className="text-xl font-bold text-[#1A365D] mb-4">ðŸ‡¦ðŸ‡º Asia-Pacific Hub - Australia</h3>
                  <address className="text-gray-700 not-italic leading-relaxed mb-4">
                    89 Harbour Street<br/>
                    Sydney NSW 2000<br/>
                    Australia
                  </address>
                  <a href="tel:+61292301111" className="text-sky-600 font-semibold hover:text-sky-700">+61 (2) 9230-1111</a>
                </div>
              </div>
            </div>
          </section>
        </div>
      );
    }

    // ==== Track Page ====
    function Track({ trackingId, shipmentState, setLoading }) {
      const { shipment, updateShipment } = shipmentState;
      const [localShipment, setLocalShipment] = useState(null);
      const [showCheckpointModal, setShowCheckpointModal] = useState(false);
      const [error, setError] = useState(null);
      const [zoom, setZoom] = useState(1);
      const [hasAttempted, setHasAttempted] = useState(false);
      const imageMapRef = useRef(null);

      useEffect(() => {
        // Only fetch if a trackingId is provided
        if (trackingId && trackingId.trim()) {
          setHasAttempted(true);
          setLoading(true);
          setError(null);
          setLocalShipment(null);
          
          // STRICT: Always fetch from Google Sheet - no mock data
          fetch(`${GOOGLE_SCRIPT_URL}?id=${trackingId}`, { method: 'GET' })
            .then(res => res.json())
            .then(data => {
              if (data.success && data.shipment) {
                setLocalShipment(data.shipment);
                setError(null);
              } else {
                setLocalShipment(null);
                setError('Invalid Tracking ID. Please contact Global-Go support.');
              }
              setLoading(false);
            })
            .catch(err => {
              setLoading(false);
              setLocalShipment(null);
              setError('Invalid Tracking ID. Please contact Global-Go support.');
            });
        } else {
          // No trackingId provided - start empty
          setLocalShipment(null);
          setError(null);
          setHasAttempted(false);
        }
      }, [trackingId, setLoading]);

      const [progressState, setProgressState] = useState(0);

      useEffect(() => {
        // Real-time physics engine - update every 10 seconds
        if (!localShipment || localShipment.isPaused) return;

        const updateProgress = () => {
          if (localShipment && localShipment.startTime && localShipment.endTime) {
            const now = new Date().getTime();
            const start = new Date(localShipment.startTime).getTime();
            const end = new Date(localShipment.endTime).getTime();
            const calc = ((now - start) / (end - start)) * 100;
            setProgressState(Math.max(0, Math.min(100, calc)));
          }
        };

        updateProgress(); // Initial calculation
        const interval = setInterval(updateProgress, 10000); // Update every 10 seconds

        return () => clearInterval(interval);
      }, [localShipment]);

      const checkpointData = calculateCurrentCheckpoint(
        localShipment?.startTime,
        localShipment?.endTime,
        localShipment?.checkpoints || []
      );
      const progress = localShipment ? progressState : checkpointData.progress;
      const currentCheckpoint = checkpointData.checkpoint;
      const checkpoints = localShipment?.checkpoints || [];

      function openWhatsApp() {
        const phone = (localShipment && (localShipment.whatsappLink || shipment.whatsappLink)) || '';
        if (!phone) return alert('WhatsApp number not available');
        const msg = encodeURIComponent(`Hi, I'm tracking shipment ${trackingId}. Please assist.`);
        window.open(`https://wa.me/${phone.replace(/\D/g,'')}?text=${msg}`, '_blank');
      }

      function getVehicleIcon() {
        const mode = localShipment?.transportMode?.toLowerCase() || 'truck';
        const iconMap = {
          'plane': 'fa-plane',
          'ship': 'fa-ship',
          'train': 'fa-train',
          'truck': 'fa-truck',
          'van': 'fa-van-shuttle',
          'motorcycle': 'fa-motorcycle'
        };
        return iconMap[mode] || 'fa-truck';
      }

      function handleWheel(e) {
        e.preventDefault();
        const delta = e.deltaY > 0 ? -0.1 : 0.1;
        const newZoom = Math.max(1, Math.min(4, zoom + delta));
        setZoom(newZoom);
      }

      useEffect(() => {
        const mapElement = imageMapRef.current;
        if (mapElement) {
          mapElement.addEventListener('wheel', handleWheel, { passive: false });
          return () => mapElement.removeEventListener('wheel', handleWheel);
        }
      }, [zoom]);

      return (
        <div className="min-h-screen bg-gray-900">
          <div className="max-w-7xl mx-auto px-4 py-6">
            <div className="mb-4 flex items-center justify-between">
              <h2 className="text-xl font-bold text-white">Track Your Shipment</h2>
              <div className="text-sm text-gray-400">Status: <strong className="ml-2 text-blue-400">{localShipment?.status || 'Ready'}</strong></div>
            </div>

            {/* Error Message - Red Banner for Invalid ID */}
            {error && (
              <div className="mb-6 p-4 bg-red-100 border-l-4 border-red-600 rounded-lg shadow-lg">
                <p className="text-red-800 font-bold text-lg">âŒ {error}</p>
                <p className="text-red-700 text-sm mt-2">Please go back to the home page and enter a valid tracking code.</p>
              </div>
            )}

            {/* CLEAN START: Empty page if no trackingId provided */}
            {!trackingId || !trackingId.trim() ? (
              <div className="bg-gradient-to-b from-[#1A365D] to-[#0f2847] text-white rounded-lg p-12 text-center min-h-96 flex flex-col items-center justify-center">
                <h1 className="text-4xl font-bold mb-4">Global-Go Tracking Portal</h1>
                <p className="text-xl text-blue-100 mb-8">Track your shipment in real-time</p>
                <div className="mb-6 text-6xl">ðŸ“¦</div>
                <p className="text-blue-200 max-w-md mb-8">Enter your tracking ID on the home page to view live updates on your package, current location, and estimated delivery time.</p>
                <button onClick={() => window.location.href = '/'} className="px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition">
                  Go to Home
                </button>
              </div>
            ) : hasAttempted && !localShipment && !error ? (
              // Loading state
              <div className="flex justify-center items-center py-20">
                <div className="text-center">
                  <div className="mb-4">
                    <div className="w-12 h-12 border-4 border-blue-400 border-t-blue-600 rounded-full animate-spin mx-auto"></div>
                  </div>
                  <p className="text-gray-300 font-semibold">Validating your tracking ID...</p>
                </div>
              </div>
            ) : localShipment ? (
              // ===== SIMULATION REVEALED - Only when valid ID is confirmed =====
              <div className="relative">
                {/* Image Map with Zoom */}
                <div className="relative bg-black rounded-lg overflow-hidden border border-gray-700 mb-6" style={{height: '600px'}}>
                  <div
                    ref={imageMapRef}
                    className="w-full h-full bg-gray-800 absolute transition-transform"
                    style={{
                      backgroundImage: localShipment?.routeScreenshot ? `url(${localShipment.routeScreenshot})` : 'none',
                      backgroundSize: 'contain',
                      backgroundPosition: 'center',
                      backgroundRepeat: 'no-repeat',
                      transform: `scale(${zoom})`,
                      transformOrigin: 'center center'
                    }}
                    onWheel={handleWheel}
                  >
                    {/* Moving Vehicle Icon - Matches Progress */}
                    <button
                      onClick={() => setShowCheckpointModal(true)}
                      className="absolute top-1/2 transform -translate-y-1/2 z-10 cursor-pointer hover:scale-110 transition-transform"
                      style={{left: `${Math.max(0, Math.min(100, progress))}%`}}
                      title="Click to view checkpoint details"
                    >
                      <i className={`fas ${getVehicleIcon()} text-4xl text-blue-400 drop-shadow-lg`}></i>
                    </button>
                  </div>

                  {/* Pause Overlay - Shows if isPaused with Admin's statusNote */}
                  {localShipment?.isPaused && (
                    <div className="absolute inset-0 bg-black/70 flex items-center justify-center z-50 rounded-lg">
                      <div className="bg-white rounded-xl p-8 text-center shadow-2xl max-w-sm">
                        <h2 className="text-2xl font-bold text-red-600 mb-4">â¸ï¸ Shipment On Hold</h2>
                        {localShipment?.statusNote && (
                          <p className="text-gray-700 mb-6 text-lg font-semibold">{localShipment.statusNote}</p>
                        )}
                        <button
                          onClick={openWhatsApp}
                          className="w-full bg-green-500 text-white py-3 rounded-lg font-bold hover:bg-green-600 transition"
                        >
                          <i className="fab fa-whatsapp mr-2"></i> Resolve via WhatsApp
                        </button>
                      </div>
                    </div>
                  )}

                  {/* Zoom Indicator */}
                  <div className="absolute bottom-4 right-4 bg-black/70 text-white px-3 py-1 rounded-lg text-sm font-mono">
                    {Math.round(zoom * 100)}%
                  </div>
                </div>

                {/* Journey Progress Bar */}
                <div className="bg-white rounded-lg p-4 mb-6 shadow-lg">
                  <div className="flex items-center justify-between mb-2">
                    <span className="text-sm font-semibold text-gray-700">Journey Progress</span>
                    <span className="text-lg font-bold text-blue-600">{Math.max(0, Math.min(100, progress))}%</span>
                  </div>
                  <div className="w-full bg-gray-300 h-3 rounded-full overflow-hidden">
                    <div
                      style={{width: `${Math.max(0, Math.min(100, progress))}%`}}
                      className="h-3 bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500"
                    ></div>
                  </div>
                </div>

                {/* Interactive Checkpoints Grid */}
                <div className="bg-white rounded-lg p-6 shadow-lg">
                  <h3 className="text-lg font-bold text-gray-800 mb-4">Route Checkpoints ({checkpoints.length})</h3>
                  <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                    {checkpoints.map((checkpoint, idx) => {
                      const checkpointStart = (idx / checkpoints.length) * 100;
                      const checkpointEnd = ((idx + 1) / checkpoints.length) * 100;
                      const isActive = progress >= checkpointStart && progress < checkpointEnd;
                      const isCompleted = progress >= checkpointEnd;
                      
                      return (
                        <div
                          key={idx}
                          className={`p-3 rounded-lg font-semibold text-sm text-center cursor-pointer transition-all ${
                            isActive
                              ? 'bg-blue-600 text-white shadow-lg scale-105 border-2 border-blue-800'
                              : isCompleted
                              ? 'bg-green-100 text-green-800 border border-green-300'
                              : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                          }`}
                          onClick={() => setShowCheckpointModal(true)}
                        >
                          <div className="text-xl mb-1">{idx + 1}</div>
                          <div className="text-xs line-clamp-2">{checkpoint}</div>
                          {isCompleted && <div className="text-xs mt-1">âœ“</div>}
                        </div>
                      );
                    })}
                  </div>
                </div>

                {/* Shipment Details Card */}
                <div className="mt-6 bg-white rounded-lg p-6 shadow-lg">
                  <div className="grid grid-cols-2 gap-4 mb-4">
                    <div>
                      <div className="text-sm text-gray-600 font-medium">Tracking ID</div>
                      <div className="text-lg font-bold text-gray-800">{localShipment?.id || trackingId}</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-600 font-medium">Vehicle Type</div>
                      <div className="text-lg font-bold text-gray-800 capitalize">{localShipment?.transportMode || 'Truck'}</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-600 font-medium">Current Checkpoint</div>
                      <div className="text-lg font-bold text-blue-600">{currentCheckpoint.split('.')[0] || 'Starting...'}</div>
                    </div>
                    <div>
                      <div className="text-sm text-gray-600 font-medium">Status</div>
                      <div className={`text-lg font-bold ${localShipment?.isPaused ? 'text-red-600' : 'text-green-600'}`}>
                        {localShipment?.isPaused ? 'On Hold' : 'In Transit'}
                      </div>
                    </div>
                  </div>
                  <button
                    onClick={openWhatsApp}
                    className="w-full bg-green-500 text-white py-2 rounded-lg font-bold hover:bg-green-600 transition"
                  >
                    <i className="fab fa-whatsapp mr-2"></i> Chat with Support
                  </button>
                </div>
              </div>
            ) : null}

            {/* Checkpoint Details Modal - Shows current location and status */}
            {showCheckpointModal && localShipment && (
              <div className="fixed inset-0 z-60 flex items-center justify-center bg-black/50 backdrop-blur-sm">
                <div className="bg-white rounded-xl p-8 shadow-2xl max-w-md w-full text-center animate-bounce-in">
                  <div className="text-5xl mb-4">{localShipment?.transportMode === 'plane' ? 'âœˆï¸' : localShipment?.transportMode === 'ship' ? 'ðŸš¢' : localShipment?.transportMode === 'train' ? 'ðŸš‚' : localShipment?.transportMode === 'motorcycle' ? 'ðŸï¸' : 'ðŸšš'}</div>
                  <h3 className="text-2xl font-bold mb-2 text-gray-800">Status: In Transit</h3>
                  <div className="text-lg text-gray-700 mb-6 bg-blue-50 p-4 rounded-lg">
                    <strong>Current Location:</strong>
                    <div className="text-blue-600 font-semibold mt-2">{currentCheckpoint}</div>
                  </div>
                  <div className="text-sm text-gray-600 mb-6">Journey Progress: <strong className="text-blue-600 text-lg">{Math.max(0, Math.min(100, progress))}%</strong></div>
                  <button onClick={() => setShowCheckpointModal(false)} className="w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition">
                    Close
                  </button>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    function Admin({ shipmentState, setLoading, onLogout }) {
      const { shipment, updateShipment } = shipmentState;
      const [form, setForm] = useState({
        manualTrackingId: '',
        senderName: '',
        senderPhone: '',
        receiverName: '',
        receiverAddress: '',
        packageName: '',
        packageWeight: '',
        transportMode: shipment.transportMode || 'truck',
        estimatedArrival: '',
        cost: '',
        whatsappLink: shipment.whatsappLink || '',
        journeyCheckpoints: '',
      });

      const [packageImages, setPackageImages] = useState(shipment.packageImages || []);
      const [routeScreenshotPreview, setRouteScreenshotPreview] = useState(shipment.routeScreenshot || null);
      const [isPaused, setIsPaused] = useState(shipment.isPaused || false);
      const [statusNote, setStatusNote] = useState(shipment.statusNote || '');
      const [showSuccess, setShowSuccess] = useState(false);
      const [generatedCode, setGeneratedCode] = useState('');
      const [loading, setLoadingLocal] = useState(false);
      const [existingTrips, setExistingTrips] = useState([]);

      useEffect(() => {
        // Fetch existing trips from Google Sheet
        fetch(`${GOOGLE_SCRIPT_URL}?action=getAllTrips`, { method: 'GET' })
          .then(res => res.json())
          .then(data => {
            if (data.success && data.trips) {
              setExistingTrips(data.trips);
            }
          })
          .catch(err => console.log('Error fetching trips:', err));
      }, []);

      function handlePackageFiles(ev) {
        const files = Array.from(ev.target.files).slice(0,5);
        const newImgs = files.map(f => URL.createObjectURL(f));
        setPackageImages(prev => {
          const merged = [...prev, ...newImgs].slice(0,5);
          updateShipment({ packageImages: merged });
          return merged;
        });
      }

      function handleRouteScreenshot(ev) {
        const f = ev.target.files && ev.target.files[0];
        if (!f) return;
        const url = URL.createObjectURL(f);
        setRouteScreenshotPreview(url);
        updateShipment({ routeScreenshot: url });
      }

      function handleCheckpointsChange(val) {
        setForm(prev => ({ ...prev, journeyCheckpoints: val }));
        const items = val.split(',').map(s => s.trim()).filter(Boolean);
        updateShipment({ checkpoints: items });
      }

      function generateTrackingCode() {
        const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
        let code = 'GBG-';
        for (let i=0;i<6;i++) code += chars[Math.floor(Math.random()*chars.length)];
        return code;
      }

      function handleStart() {
        // Validate Manual Tracking ID
        if (!form.manualTrackingId || !/^GG\d{6}$/.test(form.manualTrackingId)) {
          alert('Invalid Tracking ID format. Please use GG followed by 6 digits (e.g., GG123456)');
          return;
        }

        const now = new Date();
        let endTime = null;
        if (form.estimatedArrival) {
          const parsed = new Date(form.estimatedArrival);
          if (!isNaN(parsed.getTime())) endTime = parsed;
        }
        if (!endTime) endTime = new Date(now.getTime() + 60*60*1000);

        // Format cost with $ and commas
        const formattedCost = form.cost ? `$${parseInt(form.cost).toLocaleString()}` : '';
        
        const tripData = {
          action: 'create',
          trackingId: form.manualTrackingId,
          senderName: form.senderName,
          senderPhone: form.senderPhone,
          receiverName: form.receiverName,
          receiverAddress: form.receiverAddress,
          packageName: form.packageName,
          packageWeight: form.packageWeight,
          transportMode: form.transportMode,
          estimatedArrival: form.estimatedArrival,
          cost: formattedCost,
          whatsappLink: form.whatsappLink,
          checkpoints: form.journeyCheckpoints ? form.journeyCheckpoints.split(',').map(s=>s.trim()).filter(Boolean) : [],
          status: 'Active',
          startTime: now.toISOString(),
          endTime: endTime.toISOString(),
          isPaused: isPaused,
          statusNote: statusNote
        };

        setGeneratedCode(form.manualTrackingId);
        setLoadingLocal(true);
        
        fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          body: new FormData(Object.entries(tripData).reduce((fd, [k, v]) => { fd.append(k, typeof v === 'object' ? JSON.stringify(v) : v); return fd; }, new FormData()))
        })
        .then(res => res.text())
        .then(data => {
          setShowSuccess(true);
          setLoadingLocal(false);
          updateShipment({
            status: 'Active',
            startTime: now,
            endTime: endTime,
            transportMode: form.transportMode,
            whatsappLink: form.whatsappLink,
            packageImages: packageImages,
            checkpoints: form.journeyCheckpoints ? form.journeyCheckpoints.split(',').map(s=>s.trim()).filter(Boolean) : [],
            routeScreenshot: routeScreenshotPreview,
            trackingId: form.manualTrackingId,
          });
          // Clear form fields after 2 seconds
          setTimeout(() => {
            setForm({
              manualTrackingId: '',
              senderName: '',
              senderPhone: '',
              receiverName: '',
              receiverAddress: '',
              packageName: '',
              packageWeight: '',
              transportMode: 'truck',
              estimatedArrival: '',
              cost: '',
              whatsappLink: shipment.whatsappLink || '',
              journeyCheckpoints: '',
            });
            setPackageImages([]);
            setRouteScreenshotPreview(null);
            setShowSuccess(false);
          }, 2000);
        })
        .catch(err => {
          setLoadingLocal(false);
          alert('Error starting trip: ' + err.message);
        });
      }

      function handlePauseToggle() {
        setIsPaused(p => !p);
        updateShipment({ 
          isPaused: !isPaused, 
          status: !isPaused ? 'Paused' : 'Active',
          statusNote: statusNote
        });
      }

      return (
        <div className="min-h-screen bg-gray-50 p-6">
          <div className="max-w-7xl mx-auto">
            <div className="flex items-center justify-between mb-8">
              <h1 className="text-3xl font-bold text-[#1A365D]">Admin Dashboard</h1>
              <button onClick={onLogout} className="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold">Logout</button>
            </div>
          
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div className="lg:col-span-2 space-y-4">
              <div className="bg-white rounded-xl p-6 shadow border-l-4 border-blue-600">
                <h3 className="font-bold text-xl mb-3">Tracking ID (Required)</h3>
                <div className="mb-3">
                  <input 
                    placeholder="GG123456 (format: GG + 6 digits)" 
                    value={form.manualTrackingId} 
                    onChange={e=>setForm({...form,manualTrackingId:e.target.value.toUpperCase()})} 
                    className={`w-full p-2 border rounded font-mono text-lg ${form.manualTrackingId && !/^GG\d{6}$/.test(form.manualTrackingId) ? 'border-red-500 bg-red-50' : ''}`}
                  />
                  <p className="text-xs text-gray-600 mt-2">Format: GG followed by exactly 6 digits (e.g., GG123456)</p>
                  {form.manualTrackingId && !/^GG\d{6}$/.test(form.manualTrackingId) && (
                    <p className="text-xs text-red-600 mt-1">âŒ Invalid format. Must be GG + 6 digits.</p>
                  )}
                </div>
              </div>

              <div className="bg-white rounded-xl p-6 shadow">
                <h3 className="font-bold text-xl mb-3">Sender Info</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <input placeholder="Sender name" value={form.senderName} onChange={e=>setForm({...form,senderName:e.target.value})} className="p-2 border rounded" />
                  <input placeholder="Sender phone" value={form.senderPhone} onChange={e=>setForm({...form,senderPhone:e.target.value})} className="p-2 border rounded" />
                </div>
              </div>

              <div className="bg-white rounded-xl p-6 shadow">
                <h3 className="font-bold text-xl mb-3">Receiver Info</h3>
                <div className="grid grid-cols-1 gap-3">
                  <input placeholder="Receiver name" value={form.receiverName} onChange={e=>setForm({...form,receiverName:e.target.value})} className="p-2 border rounded" />
                  <input placeholder="Receiver address" value={form.receiverAddress} onChange={e=>setForm({...form,receiverAddress:e.target.value})} className="p-2 border rounded" />
                </div>
              </div>

              <div className="bg-white rounded-xl p-6 shadow">
                <h3 className="font-bold text-xl mb-3">Package Info</h3>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <input placeholder="Package name" value={form.packageName} onChange={e=>setForm({...form,packageName:e.target.value})} className="p-2 border rounded" />
                  <input placeholder="Weight (kg)" value={form.packageWeight} onChange={e=>setForm({...form,packageWeight:e.target.value})} className="p-2 border rounded" />
                </div>
                <div className="mt-3">
                  <div className="text-sm mb-2">Package images (3-5)</div>
                  <input type="file" multiple accept="image/*" onChange={handlePackageFiles} />
                  <div className="grid grid-cols-3 gap-2 mt-3">
                    {packageImages.map((src,i)=> <img key={i} src={src} className="h-24 w-full object-cover rounded" alt="" onError={(e)=>e.currentTarget.src='https://via.placeholder.com/100'} />)}
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-xl p-6 shadow">
                <h3 className="font-bold text-xl mb-3">Logistics & Route Engine</h3>
                <div className="space-y-3">
                  <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <select value={form.transportMode} onChange={e=>setForm({...form,transportMode:e.target.value})} className="p-2 border rounded md:col-span-1">
                      <option value="truck">Truck</option>
                      <option value="van">Van</option>
                      <option value="bike">Bike</option>
                      <option value="plane">Plane</option>
                      <option value="ship">Ship</option>
                    </select>
                    <input type="datetime-local" value={form.estimatedArrival} onChange={e=>setForm({...form,estimatedArrival:e.target.value})} className="p-2 border rounded" />
                    <input placeholder="Cost" value={form.cost} onChange={e=>setForm({...form,cost:e.target.value})} className="p-2 border rounded" />
                  </div>

                  <div>
                    <label className="block font-medium mb-1">Journey Checkpoints (12-15 locations, comma separated)</label>
                    <textarea rows="4" placeholder="Checkpoint1, Checkpoint2, ..." value={form.journeyCheckpoints} onChange={e=>handleCheckpointsChange(e.target.value)} className="w-full p-2 border rounded" />
                    <div className="text-sm text-gray-600 mt-2">Provided: {shipment.checkpoints?.length || 0} checkpoints</div>
                    <div className="mt-2 text-sm text-gray-700">
                      {shipment.checkpoints && shipment.checkpoints.slice(0,15).map((c,i)=>(<div key={i} className="text-sm">{i+1}. {c}</div>))}
                    </div>
                  </div>

                  <div>
                    <label className="block font-medium mb-1">Route Screenshot (one image)</label>
                    <input type="file" accept="image/*" onChange={handleRouteScreenshot} />
                    {routeScreenshotPreview && <img src={routeScreenshotPreview} className="mt-3 w-full h-48 object-cover rounded" alt="route" />}
                  </div>

                  <div className="flex gap-2 mt-3">
                    <button onClick={handleStart} disabled={loading} className={`py-2 px-4 rounded font-semibold ${loading ? 'bg-gray-400 cursor-not-allowed' : 'bg-[#1A365D] hover:bg-[#0f2847] text-white'}`}>

                  {/* Pause Reason / Status Note Section */}
                  {isPaused && (
                    <div className="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                      <h4 className="font-bold text-yellow-800 mb-2">â¸ï¸ Pause Reason</h4>
                      <textarea 
                        placeholder="Enter reason for pausing shipment (e.g., 'Customs clearance required', 'Weather delay', etc.)"
                        value={statusNote}
                        onChange={e => setStatusNote(e.target.value)}
                        className="w-full p-2 border border-yellow-300 rounded text-sm"
                        rows="3"
                      />
                      <p className="text-xs text-yellow-700 mt-2">This message will be shown to the customer when they track the shipment.</p>
                    </div>
                  )}
                      {loading ? 'Starting Trip...' : 'Start Trip'}
                    </button>
                    <button onClick={handlePauseToggle} className={`py-2 px-4 rounded font-semibold ${isPaused ? 'bg-blue-600 text-white' : 'bg-yellow-400 text-black'}`}>{isPaused ? 'Resume' : 'Pause'}</button>
                  </div>
                </div>
              </div>
            </div>

            <div className="space-y-4">
              <div className="bg-white p-6 rounded-xl shadow">
                <h4 className="font-bold mb-3">Trip Summary</h4>
                <div className="text-sm text-gray-700">
                  <div>Vehicle: {shipment.vehicleDetails.number}</div>
                  <div>Mode: {shipment.transportMode}</div>
                  <div>Images: {packageImages.length}</div>
                  <div className="mt-2">WhatsApp: <span className="font-medium">{form.whatsappLink || 'â€”'}</span></div>
                </div>
              </div>

              {existingTrips.length > 0 && (
                <div className="bg-white p-6 rounded-xl shadow">
                  <h4 className="font-bold mb-3">Active Trips ({existingTrips.length})</h4>
                  <div className="space-y-2 max-h-64 overflow-y-auto">
                    {existingTrips.map((trip, idx) => (
                      <div key={idx} className="p-3 bg-gray-50 border border-gray-200 rounded-lg text-sm">
                        <div className="font-semibold text-gray-800">{trip.trackingCode || trip.id}</div>
                        <div className="text-gray-600 flex justify-between mt-1">
                          <span>{trip.senderName || 'N/A'}</span>
                          <span className={`px-2 py-0.5 rounded text-xs font-medium ${trip.isPaused ? 'bg-red-100 text-red-700' : 'bg-green-100 text-green-700'}`}>
                            {trip.isPaused ? 'Paused' : trip.status || 'Active'}
                          </span>
                        </div>
                        <div className="text-gray-500 text-xs mt-1">Mode: {trip.transportMode || 'truck'}</div>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>

          {showSuccess && (
            <div className="fixed inset-0 z-60 flex items-center justify-center bg-black/50">
              <div className="bg-white rounded-xl p-6 shadow max-w-md w-full text-center">
                <h3 className="text-xl font-bold mb-2">Trip Started</h3>
                <div className="text-sm text-gray-600 mb-4">Tracking ID</div>
                <div className="text-3xl font-mono font-bold text-[#1A365D] mb-4">{generatedCode}</div>
                <div className="flex gap-2 justify-center">
                  <button onClick={()=>{navigator.clipboard && navigator.clipboard.writeText(generatedCode); alert('Copied');}} className="px-4 py-2 bg-sky-500 text-white rounded">Copy</button>
                  <button onClick={()=>setShowSuccess(false)} className="px-4 py-2 border rounded">Close</button>
                </div>
              </div>
            </div>
          )}
        </div>
        </div>
      );
    }

    // ==== SignIn Page ====
    function SignIn({ onNavigate }) {
      const [form, setForm] = useState({ username: '', password: '' });
      const [showError, setShowError] = useState(false);

      function handleSignIn() {
         if (form.username.toLowerCase() === 'admin' && form.password === '123') {
          onNavigate('admin');
        } else {
          setShowError(true);
          setTimeout(() => setShowError(false), 3000);
        }
      }

      return (
        <div className="min-h-screen bg-gradient-to-b from-[#1A365D] to-[#0f2847] flex items-center justify-center px-4">
          <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full">
            <div className="text-center mb-6">
              <h1 className="text-3xl font-bold text-[#1A365D]">Sign In</h1>
              <p className="text-gray-600 mt-2">Welcome back to Global-Go</p>
            </div>

            {showError && (
              <div className="mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded">
                Account not found. Please check your credentials and try again.
              </div>
            )}

            <div className="space-y-4">
              <div>
                 <label className="block text-sm font-medium text-gray-700 mb-1">Username</label>
                <input
                   type="text"
                   value={form.username}
                   onChange={e => setForm({...form, username: e.target.value})}
                   placeholder="admin"
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <input
                  type="password"
                  value={form.password}
                  onChange={e => setForm({...form, password: e.target.value})}
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D]"
                />
              </div>

              <button
                onClick={handleSignIn}
                 disabled={!form.username || !form.password}
                className="w-full bg-[#1A365D] hover:bg-[#0f2847] text-white py-2 rounded-lg font-semibold mt-6 disabled:opacity-50"
              >
                Sign In
              </button>
            </div>

            <div className="mt-6 border-t pt-6">
              <p className="text-gray-600 text-sm mb-3 font-medium">Or continue with</p>
              <div className="grid grid-cols-2 gap-3">
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fab fa-google"></i> Google
                </button>
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fab fa-apple"></i> Apple
                </button>
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fas fa-envelope"></i> Email
                </button>
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fab fa-facebook"></i> Facebook
                </button>
              </div>
            </div>

            <div className="mt-6 text-center">
              <p className="text-gray-600">Don't have an account?</p>
              <button onClick={() => onNavigate('signup')} className="text-[#1A365D] font-semibold hover:underline">
                Create one here
              </button>
            </div>

            <button onClick={() => onNavigate('home')} className="w-full mt-4 text-gray-600 hover:text-gray-800">
              â† Back to Home
            </button>
          </div>
        </div>
      );
    }

    // ==== SignUp Page ====
    function SignUp({ onNavigate }) {
      const [form, setForm] = useState({
        name: '',
        email: '',
        phone: '',
        password: '',
        confirmPassword: '',
      });
      const [showSuccess, setShowSuccess] = useState(false);
      const [cooldownTime, setCooldownTime] = useState(0);

      useEffect(() => {
        let interval;
        if (cooldownTime > 0) {
          interval = setInterval(() => {
            setCooldownTime(prev => {
              if (prev <= 1) {
                setShowSuccess(false);
                return 0;
              }
              return prev - 1;
            });
          }, 1000);
        }
        return () => clearInterval(interval);
      }, [cooldownTime]);

      function handleSignUp() {
        if (!form.name || !form.email || !form.phone || !form.password || !form.confirmPassword) {
          alert('Please fill in all fields');
          return;
        }
        if (form.password !== form.confirmPassword) {
          alert('Passwords do not match');
          return;
        }
        setShowSuccess(true);
        setCooldownTime(300); // 5 minutes in seconds
      }

      const formatTime = (seconds) => {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins}:${secs.toString().padStart(2, '0')}`;
      };

      return (
        <div className="min-h-screen bg-gradient-to-b from-[#1A365D] to-[#0f2847] flex items-center justify-center px-4">
          <div className="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full">
            <div className="text-center mb-6">
              <h1 className="text-3xl font-bold text-[#1A365D]">Create Account</h1>
              <p className="text-gray-600 mt-2">Join Global-Go today</p>
            </div>

            {showSuccess && (
              <div className="mb-4 p-4 bg-blue-100 border border-blue-400 rounded">
                <h3 className="font-semibold text-blue-800 mb-2">Account Under Review</h3>
                <p className="text-sm text-blue-700 mb-3">
                  Please re-enter your details and try again.
                </p>
                <div className="text-lg font-bold text-blue-600">
                  Available in: {formatTime(cooldownTime)}
                </div>
              </div>
            )}

            <div className="space-y-3">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                <input
                  type="text"
                  value={form.name}
                  onChange={e => setForm({...form, name: e.target.value})}
                  placeholder="John Doe"
                  disabled={cooldownTime > 0}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D] disabled:bg-gray-100"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                <input
                  type="email"
                  value={form.email}
                  onChange={e => setForm({...form, email: e.target.value})}
                  placeholder="you@example.com"
                  disabled={cooldownTime > 0}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D] disabled:bg-gray-100"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                <input
                  type="tel"
                  value={form.phone}
                  onChange={e => setForm({...form, phone: e.target.value})}
                  placeholder="+1 (555) 000-0000"
                  disabled={cooldownTime > 0}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D] disabled:bg-gray-100"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <input
                  type="password"
                  value={form.password}
                  onChange={e => setForm({...form, password: e.target.value})}
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  disabled={cooldownTime > 0}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D] disabled:bg-gray-100"
                />
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
                <input
                  type="password"
                  value={form.confirmPassword}
                  onChange={e => setForm({...form, confirmPassword: e.target.value})}
                  placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                  disabled={cooldownTime > 0}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A365D] disabled:bg-gray-100"
                />
              </div>

              <button
                onClick={handleSignUp}
                disabled={cooldownTime > 0 || Object.values(form).some(v => !v)}
                className="w-full bg-[#1A365D] hover:bg-[#0f2847] text-white py-2 rounded-lg font-semibold mt-6 disabled:opacity-50"
              >
                {cooldownTime > 0 ? `Try again in ${formatTime(cooldownTime)}` : 'Create Account'}
              </button>
            </div>

            <div className="mt-6 border-t pt-6">
              <p className="text-gray-600 text-sm mb-3 font-medium">Or sign up with</p>
              <div className="grid grid-cols-2 gap-3">
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fab fa-google"></i> Google
                </button>
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fab fa-apple"></i> Apple
                </button>
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fas fa-envelope"></i> Email
                </button>
                <button onClick={() => {}} className="flex items-center justify-center gap-2 py-2 px-3 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium text-gray-700">
                  <i className="fab fa-facebook"></i> Facebook
                </button>
              </div>
            </div>

            <div className="mt-6 text-center">
              <p className="text-gray-600">Already have an account?</p>
              <button onClick={() => onNavigate('signin')} className="text-[#1A365D] font-semibold hover:underline">
                Sign in here
              </button>
            </div>

            <button onClick={() => onNavigate('home')} className="w-full mt-4 text-gray-600 hover:text-gray-800">
              â† Back to Home
            </button>
          </div>
        </div>
      );
    }
    
    // ==== Root App ====
    function App() {
      const shipmentState = useShipment({
        transportMode: 'truck',
         vehicleDetails: { number: '', driver: '' },
        isPaused: false,
        currentLocation: null,
        whatsappLink: '+1(336)459-6552',
        status: 'Pending',
        startTime: null,
        endTime: null,
        packageImages: [],
      });

      const [route, setRoute] = useState({ page: 'home', trackingId: '' });
      const [sidebarOpen, setSidebarOpen] = useState(false);
      const [loading, setLoading] = useState(false);
      const [isAdminAuthenticated, setIsAdminAuthenticated] = useState(false);
      const [copyrightClicks, setCopyrightClicks] = useState(0);
      
      useEffect(() => {
        const params = new URLSearchParams(window.location.search);
        if (params.get('page') === 'admin' && !isAdminAuthenticated) {
          setRoute({ page: 'signin-for-admin', trackingId: '' });
          window.history.replaceState({}, '', window.location.pathname);
        }
      }, []);
      
      function navigate(page, id) { setRoute({ page, trackingId: id || '' }); setSidebarOpen(false); window.scrollTo(0,0); }
      
      function handleAdminLogin() {
        setIsAdminAuthenticated(true);
        navigate('admin');
      }
      
      function handleAdminLogout() {
        setIsAdminAuthenticated(false);
        navigate('home');
      }
       
       function handleCopyrightClick() {
         setCopyrightClicks(c => c + 1);
         if (copyrightClicks + 1 >= 5) {
           handleAdminLogin();
           setCopyrightClicks(0);
         }
       }

      return (
        <div className="min-h-screen flex flex-col bg-white">
          <header className="bg-[#1A365D] text-white sticky top-0 z-40 shadow-lg">
            <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
              <button onClick={() => navigate('home')} className="flex items-center gap-2 font-bold text-lg hover:text-sky-300">
                <img src="logo1.jpeg" alt="Global-Go" className="w-8 h-8 object-contain rounded-full" />
                Global-Go
              </button>
              <nav className="hidden md:flex gap-6">
                <button onClick={()=>navigate('home')} className="text-blue-100">Home</button>
                <button onClick={()=>navigate('about')} className="text-blue-100">About</button>
                <button onClick={()=>navigate('track')} className="text-blue-100">Track</button>
                <button onClick={()=>navigate('help')} className="text-blue-100">Help</button>
              </nav>
              <button onClick={()=>setSidebarOpen(!sidebarOpen)} className="md:hidden text-white text-2xl">â˜°</button>
            </div>
            {sidebarOpen && (
              <div className="md:hidden bg-[#0f2847] border-t border-blue-400">
                <div className="px-4 py-2 flex flex-col gap-2">
                  <button onClick={()=>navigate('home')} className="text-blue-100 py-2 hover:bg-[#1A365D] px-2 rounded">Home</button>
                  <button onClick={()=>navigate('about')} className="text-blue-100 py-2 hover:bg-[#1A365D] px-2 rounded">About</button>
                  <button onClick={()=>navigate('track')} className="text-blue-100 py-2 hover:bg-[#1A365D] px-2 rounded">Track</button>
                  <button onClick={()=>navigate('help')} className="text-blue-100 py-2 hover:bg-[#1A365D] px-2 rounded">Help</button>
                </div>
              </div>
            )}
          </header>

          <main>
            {route.page === 'home' && <Home onNavigate={navigate} />}
            {route.page === 'about' && <About />}
            {route.page === 'help' && <Help setLoading={setLoading} />}
            {route.page === 'signin' && <SignIn onNavigate={navigate} />}
            {route.page === 'signup' && <SignUp onNavigate={navigate} />}
            {route.page === 'track' && <Track trackingId={route.trackingId} shipmentState={shipmentState} setLoading={setLoading} />}
            {route.page === 'signin-for-admin' && <SignIn onNavigate={handleAdminLogin} />}
            {route.page === 'admin' && (isAdminAuthenticated ? <Admin shipmentState={shipmentState} setLoading={setLoading} onLogout={handleAdminLogout} /> : null)}
          </main>

          <footer className="bg-[#1A365D] text-white py-12 mt-12">
            <div className="max-w-7xl mx-auto px-4">
              {/* Main Footer Grid */}
              <div className="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                {/* Column 1: About */}
                <div>
                  <div className="flex items-center gap-2 mb-4">
                    <img src="logo1.jpeg" alt="Global-Go" className="w-10 h-10 object-contain rounded-full" />
                    <h3 className="text-xl font-bold">Global-Go</h3>
                  </div>
                  <p className="text-blue-100 text-sm leading-relaxed">Redefining global logistics since 1998. Connecting the world through reliable, fast, and secure shipping solutions. Trusted by millions worldwide.</p>
                </div>

                {/* Column 2: Quick Links */}
                <div>
                  <h4 className="text-lg font-bold mb-4 text-sky-400">Quick Links</h4>
                  <ul className="space-y-2 text-blue-100 text-sm">
                    <li><button onClick={() => navigate('home')} className="hover:text-white transition">Home</button></li>
                    <li><button onClick={() => navigate('about')} className="hover:text-white transition">About</button></li>
                    <li><button onClick={() => navigate('track')} className="hover:text-white transition">Track Shipment</button></li>
                    <li><button onClick={() => navigate('help')} className="hover:text-white transition">Help & Support</button></li>
                  </ul>
                </div>

                {/* Column 3: Our Services */}
                <div>
                  <h4 className="text-lg font-bold mb-4 text-sky-400">Our Services</h4>
                  <ul className="space-y-2 text-blue-100 text-sm">
                    <li className="hover:text-white transition cursor-pointer">âœˆï¸ Air Freight</li>
                    <li className="hover:text-white transition cursor-pointer">ðŸš¢ Ocean Cargo</li>
                    <li className="hover:text-white transition cursor-pointer">ðŸšš Road Transport</li>
                    <li className="hover:text-white transition cursor-pointer">ðŸ“¦ Warehousing</li>
                  </ul>
                </div>

                {/* Column 4: Global Offices */}
                <div>
                  <h4 className="text-lg font-bold mb-4 text-sky-400">Global Offices</h4>
                  <div className="space-y-4 text-sm">
                    <div className="text-blue-100 border-b border-blue-700 pb-3">
                      <p className="font-semibold text-sky-300">ðŸ‡ºðŸ‡¸ USA HQ</p>
                      <p className="text-xs">Houston, TX</p>
                      <a href="tel:+18004556425" className="hover:text-white transition">+1 (800) 455-GLOBAL</a>
                    </div>
                    <div className="text-blue-100 border-b border-blue-700 pb-3">
                      <p className="font-semibold text-sky-300">ðŸ‡«ðŸ‡· Europe</p>
                      <p className="text-xs">Paris, France</p>
                      <a href="tel:+33142960000" className="hover:text-white transition">+33 (1) 42-96-00-00</a>
                    </div>
                    <div className="text-blue-100">
                      <p className="font-semibold text-sky-300">ðŸ‡¦ðŸ‡º Asia-Pacific</p>
                      <p className="text-xs">Sydney, Australia</p>
                      <a href="tel:+61292301111" className="hover:text-white transition">+61 (2) 9230-1111</a>
                    </div>
                  </div>
                </div>
              </div>

              {/* Divider */}
              <div className="border-t border-blue-400 my-8"></div>

              {/* Social Links & Copyright */}
              <div className="flex flex-col md:flex-row items-center justify-between">
                 <button onClick={handleCopyrightClick} className="text-blue-100 text-sm hover:text-sky-400 transition cursor-pointer" title="Admin Login (Click 5x)">&copy; 2026 Global-Go Logistics. All rights reserved.</button>
                <div className="flex gap-4 mt-4 md:mt-0">
                  <a href="#" className="text-blue-100 hover:text-sky-400 transition text-xl">
                    <i className="fab fa-linkedin"></i>
                  </a>
                  <a href="#" className="text-blue-100 hover:text-sky-400 transition text-xl">
                    <i className="fab fa-twitter"></i>
                  </a>
                  <a href="#" className="text-blue-100 hover:text-sky-400 transition text-xl">
                    <i className="fab fa-facebook"></i>
                  </a>
                </div>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
